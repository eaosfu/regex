#!/bin/bash

RED='\033[0;31m'
GREEN='\033[0;32m'
NOCOLOR='\033[0m'

echo "Diff results"
testdir="tests"
rdir="$testdir/regex_output";
gdir="$testdir/grep_output";
rinput="$testdir/regex_input"
failed_count=0
for i in $(ls $rinput | sort -g| grep -o '[0-9]\+$'); do
  diff $rdir/regex_$i $gdir/grep_$i >& /dev/null; 
  if [[ $? == 1 ]]; then 
    echo -e "test_$i: ${RED}Failed${NOCOLOR}";
    failed_count=$((${failed_count} + 1))
  else
    echo -e "test_$i: ${GREEN}Passed${NOCOLOR}";
  fi
done;
echo "Failed ${failed_count}/${i} tests"
